<HTML>
<head>
<TITLE>Insertar archivo</TITLE>
<style type="text/css">
.caja{
	border: thin;
	border-style: solid;
	border-width: 1px;
	border-color: #3E3E3E;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
	font-size: 10px;
	color: #3D3D3D;
	width: 150px;
}
.cajag{
	border: thin;
	border-style: solid;
	border-width: 1px;
	border-color: #3E3E3E;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
	font-size: 10px;
	color: #3D3D3D;
	width: 260px;
}
.normal{
	
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
	font-size: 10px;
	color: #3D3D3D;
	
}
</style>
<script LANGUAGE="Javascript">
<!--

var curId = 0, curDesc = '', isFolder = true, ID_imagen, path_G;


function IsDigit(allowPercent)
{
	if (allowPercent)
		return ((event.keyCode >= 48) && (event.keyCode <= 57) || event.keyCode == 37)
	else
		return (event.keyCode >= 48) && (event.keyCode <= 57)
}

function setInfo(path, ID) {
	ID_imagen = ID;
	path_G = path;
	var w, h, factor;
	isFolder = false;
	document.getElementById('useButton').value = 'Insertar archivo';
	document.getElementById('previewImg').innerHTML = '<input type="Text"  class="cajag" NAME="previewImgSrc" value="' + path + '" BORDER=0 ALT="vista previa">';
	}


function cancelAttribs() {
	var d = document;
	d.getElementById('swfDiv').style.visibility='hidden';
	d.getElementById('imgDiv').style.visibility='hidden';
	d.getElementById('appletdiv').style.visibility='visible';
	if (parent.argsIn['upload'])
		d.getElementById('folderDiv').style.visibility='visible';
	d.phoundry['useButton'].disabled=false;
}


function checkAspect(f,what,value) {
	f = document.forms[f];
	if (!f.keepAspect.checked) return;
	var org, factor;
	if (what == 'width') {
		if (f.width.value == '')
			f.height.value = '';
		else
			f.height.value = Math.round(f.orgHeight.value / (f.orgWidth.value/value));
	}
	else if (what == 'height') {
		if (f.height.value == '')
			f.width.value = '';
		else
			f.width.value = Math.round(f.orgWidth.value / (f.orgHeight.value/value));
	}
}

function useFile()
{
	if (isFolder) {
		alert('Por favor seleccione un archivo'); return;
	}
	var arr = new Array();
  	arr["ID"] = ID_imagen;
	arr["imagen"] = path_G;
	window.returnValue = arr;
	window.close();
	
}


function addFile() 
{
	if (!isFolder) {
		alert('Seleccione una carpeta'); return;
	}
	treeFrame.location='new_image.php?qs='+qs+'&l=english&bdir='+bdir+'&dirId='+curId+'&dir='+curPath;
}

function delFile()
{
	if (isFolder) {
		alert('Por favor seleccione un archivo'); return;
	}
	var imgname = curPath.substring(curPath.lastIndexOf('/')+1, curPath.length);
	var msg = "Are you sure you want to delete "+unescape(imgname)+"?";	if (confirm(msg))
		treeFrame.location.href = 'file_res.php?ref=/editor/img_props.php&qs='+qs+'&l=english&bdir='+bdir+'&dirId='+curId+'&action=delFile&file=' + curPath;
}

function setPaneColor(c) {
	document.getElementById('previewImg').style.background = c;
}


function init() {
	var D = document;
	var args = parent.argsIn;
	
}
function cerrar_ventana(){
	if (confirm("¿Desea eliminar el enlace?"))
		{
		var arr = new Array();
		arr["borrar"] = "si";
		window.returnValue = arr;
		window.close();
		}
}
var targetid = window.dialogArguments["nodeid"];
//-->
</script>
<script LANGUAGE=Javascript FOR=window EVENT=onload>
<!--
  for ( elem in window.dialogArguments )
  {
    switch( elem )
    {
    case "url":
		isFolder = false;
		document.getElementById('previewImg').innerHTML = '<input type="Text"  class="cajag" NAME="previewImgSrc" value="' + window.dialogArguments["url"] + '" BORDER=0 ALT="vista previa">';
     	ID_imagen = window.dialogArguments["url"];
		my_location = "../treeselector.php?contenttype=common_import&targetid=" + ID_imagen;
		document.getElementById('appletdiv').src = my_location;
      break;
    }
  }
// -->
</script>
<style TYPE="text/css">
<!--

body, td, button, input, .txt, select {
	font: MessageBox;
}

.txt,select { width:160px; padding:0px; margin:0px; border:1px inset window;}

-->
</style>
</head>
<body bgcolor="#e0dfe3" topmargin=3 leftmargin=0 onLoad="init()">
<script LANGUAGE="Javascript">
document.write('<IFRAME application="yes" ID="appletdiv" style="position:absolute;left:10px;top:27px;width:302px;height:308px;visibility:show" NAME="treeFrame" WIDTH=302 HEIGHT=308 SRC="../treeselector.php?contenttype=common_import&targetid=' + targetid + '"></IFRAME>');
</script>

<div id="imgDiv" style="position:absolute;left:10px;top:27px;width:302px;height:308px;visibility:hidden;border:2px inset window;background-color:#ffffff;padding:5px;"></div>
<div id="previewDiv" style="position:absolute;left:320px;top:25px;width:250px">
<FORM NAME="phoundry">
<TABLE WIDTH="100%">
<tr>
	<td ID="previewImg" COLSPAN=2 style="background:white;border:1px inset window;width:300px;height:18px;">&nbsp;</td></tr>
<tr>
		<td colspan="2" nowrap>
			<INPUT ID="useButton" TYPE="button" CLASS="but" VALUE="Insertar archivo" onClick="useFile()">
			
		</td>
	</tr>
</table>
</div>

<div id="folderDiv" style="position:absolute;left:320px;top:240px;width:188px;visibility:hidden"></div>

</body>
</HTML>
